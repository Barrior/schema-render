"use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[1980],{41670:function(st,de,u){u.r(de),u.d(de,{default:function(){return Me}});var Ne=u(57213),d=u.n(Ne),me=u(43190),j=u(50959),N={submit:"submit",reset:"reset",collapse:"collapse"},ae={prefixCls:"schema-render",layoutColumnGap:10,layoutRowGap:15,actions:[N.reset,N.submit,N.collapse],defaultCollapsed:!0,collapsedRows:2},y=u(54306),ce=u.n(y),Ee=u(31912),Ie=u(15752),fe=u(88182),Y=u(33819);function we(b,A,T){var P,I;if(T)return T(b);if(!b)return 5;var M=b.clientWidth,V=((P=b.firstElementChild)===null||P===void 0||(I=P.getBoundingClientRect())===null||I===void 0?void 0:I.width)||320;return Math.floor(M/V)*A-1}var oe=u(54689),Pe=u.n(oe);function he(b,A){var T={},P=Object.keys(b.properties).slice(0,A),I=Pe()(P),M;try{for(I.s();!(M=I.n()).done;){var V=M.value;T[V]=b.properties[V]}}catch(z){I.e(z)}finally{I.f()}return{renderType:"Root",properties:T}}function le(b){var A=b.isCollapsed,T=b.rawSchema,P=b.collapsedNumber;return A?he(T,P):T}var G=u(32766);function ue(b){return G.PO(b)?Object.keys(b).length:G.kJ(b)||G.HD(b)?b.length:0}var ge=u(55225);function pe(b,A){var T=(0,ge.Z)(A),P=(0,j.useRef)(-1);(0,j.useEffect)(function(){var I,M=(I=b.current)===null||I===void 0?void 0:I.getRootElement();if(M){var V=new ResizeObserver(function(z){var k=z[0].contentRect.width;P.current!==k&&(P.current=k,T.current(M))});return V.observe(M),function(){return V.disconnect()}}},[])}var te=u(11527);function Te(b,A){var T=b.schema,P=(0,j.useState)(b.defaultCollapsed),I=ce()(P,2),M=I[0],V=I[1],z=(0,j.useState)(function(){var B;return we((B=A.current)===null||B===void 0?void 0:B.getRootElement(),b.collapsedRows,b.calcCollapsedNumber)}),k=ce()(z,2),K=k[0],re=k[1],xe=(0,j.useRef)(T);(0,j.useMemo)(function(){xe.current=le({isCollapsed:M,collapsedNumber:K,rawSchema:T})},[K,M,T]),pe(A,function(B){re(we(B,b.collapsedRows,b.calcCollapsedNumber))});var ye=(0,fe.Z)(function(B){var W;V(B),(W=b.onToggleCollapsed)===null||W===void 0||W.call(b,B)}),Ae=(0,fe.Z)(function(B){var W,Q=B.locale;if(ue(T.properties)<=K)return null;if(M){var se;return(0,te.jsxs)(Y.ZP,{type:"link",onClick:function(){return ye(!1)},style:{padding:0},children:[Q==null||(se=Q.Search)===null||se===void 0?void 0:se.expand,(0,te.jsx)(Ee.Z,{})]})}return(0,te.jsxs)(Y.ZP,{type:"link",onClick:function(){return ye(!0)},style:{padding:0},children:[Q==null||(W=Q.Search)===null||W===void 0?void 0:W.collapse,(0,te.jsx)(Ie.Z,{})]})}),Ve=d()({collapse:Ae},b.registerActions);return{schema:xe.current,registerActions:Ve}}var $=u(87793),Se=d()(d()({},$.Z),{},{FormRender:d()(d()({},$.Z.FormRender),{},{submit:"\u67E5\u8BE2"}),Search:{collapse:"\u6536\u8D77",expand:"\u5C55\u5F00"}}),Ce=u(98445);function v(b){return{className:Ce.Rk(b,"form-actions"),style:{gridColumnStart:-2,textAlign:"end"}}}var Ze=function(A,T){var P=d()(d()({},ae),A),I=(0,j.useRef)(null),M=(0,j.useMemo)(function(){return d()(d()({},Se),P.locale)},[P.locale]),V=Te(P,I),z=V.schema,k=V.registerActions,K=(0,j.useMemo)(function(){return v(P.prefixCls)},[P.prefixCls]);return(0,j.useImperativeHandle)(T,function(){return I.current}),(0,te.jsx)(me.default,d()(d()({layout:"autoFill"},P),{},{ref:I,locale:M,schema:z,registerActions:k,actionsRestSchema:K,actionsRenderMode:"formItem"}))},Oe=(0,j.forwardRef)(Ze),Me=Oe},61980:function(st,de,u){u.r(de),u.d(de,{default:function(){return yr}});var Ne=u(57213),d=u.n(Ne),me=u(68362),j=u(32766),N=u(88182),ae=u(55659),y=u(50959),ce=j.kJ,Ee=j.PO,Ie=j.HD,fe=j.kK,Y=function(e){return ce(e)?!e.length:Ee(e)?!Object.keys(e).length:Ie(e)?e.trim()==="":fe(e)};function we(t,e){return ce(t)?t.map(e):[]}function oe(t,e){if(t)for(var n=t.length,r=0;r<n;r++){var a=e==null?void 0:e(t[r],r,t);if(a)return}}function Pe(){return Math.random().toString(36).substring(7).replace(/\d/g,"x")}var he=Pe(),le=function(t){return t.actions="__actions__",t.rowNumber="__row-number__",t}({}),G={table:"st-table-".concat(he),pagination:"st-pagination-".concat(he)},ue=u(46373),ge=u(66640),pe=u(19912),te=u(4883),Te=u(54306),$=u.n(Te),Se=u(3383),Ce=u(11352),v=u(11527),Ze=function(e){var n=e.imgList,r=e.options,a=(0,y.useState)(!1),c=$()(a,2),l=c[0],m=c[1],g=(0,y.useState)(0),i=$()(g,2),s=i[0],f=i[1],R=function(h){f(h),m(!0)};return(0,v.jsx)(Se.Z.PreviewGroup,{items:n,preview:{visible:l,current:s,onChange:function(h){return f(h)},onVisibleChange:function(h){return m(h)}},children:(0,v.jsx)(Ce.Z,{children:n.map(function(C,h){return(0,y.createElement)(Se.Z,d()(d()({width:60},r),{},{src:C,key:h,onClick:function(){return R(h)}}))})})})},Oe=Ze,Me=new RegExp("(?<!\\d*\\.\\d*)(?=(\\B\\d{3})+(\\.\\d+)?$)","g"),b={backgroundColor:"#ececec",padding:16,borderRadius:6,textAlign:"left"},A=j.kJ,T={code:function(e){var n=e.value,r=e.options;return(0,v.jsx)("pre",{style:d()(d()({},b),r.style),children:(0,v.jsx)("code",{children:n})})},percent:function(e){var n=e.value;return Y(n)?"-":"".concat(n,"%")},switch:function(e){var n=e.value,r=e.options;return(0,v.jsx)(ge.Z,d()(d()({},r),{},{checked:!!n}))},tags:function(e){var n=e.value,r=e.options,a=A(n)?n:[n];return a.map(function(c,l){return(0,y.createElement)(pe.Z,d()(d()({},r),{},{key:l}),c)})},rate:function(e){var n=e.value,r=e.options;return(0,v.jsx)(te.Z,d()(d()({style:{width:134}},r),{},{disabled:!0,value:n}))},"comma-number":function(e){var n=e.value;if(Y(n))return"-";var r=Number(n);return isNaN(r)?n:String(n).replace(Me,",")},images:function(e){var n=e.value,r=e.options;if(Y(n))return"-";var a=A(n)?n:[n];return(0,v.jsx)(Oe,{imgList:a,options:r})}},P=u(12342),I=u.n(P),M=u(67006),V=u.n(M),z=ue.U2,k=j.kJ,K=j.PO;function re(t,e){return t===e?0:t>e?1:-1}var xe=function(e,n,r){var a=r.sortType,c=r.sortOrder,l=r.arrDataIndex,m=r.sortDataExtractor,g=r.sortStringValueTransform,i=m?m(e):z(e,l),s=m?m(n):z(n,l);return K(i)||K(s)?0:(k(i)&&(i=i.join("")),k(s)&&(s=s.join("")),i=String(i).trim(),s=String(s).trim(),Y(i)?c==="ascend"?1:-1:Y(s)?c==="ascend"?-1:1:a==="string"?(g&&(i=g(i),s=g(s)),re("@".concat(i).toLowerCase(),"@".concat(s).toLowerCase())):a==="date"?re(new Date(i),new Date(s)):!isNaN(Number(i))&&!isNaN(Number(s))?re(Number(i),Number(s)):V()(i).isValid()&&V()(s).isValid()?re(new Date(i),new Date(s)):(g&&(i=g(i),s=g(s)),re(i,s)))},ye=["title","dataIndex","children","valueType"],Ae=["type"],Ve=ue.U2,B=j.kJ,W=j.HD,Q=j.mf;function se(t,e,n){return t.map(function(r){var a=r.title,c=r.dataIndex,l=r.children,m=r.valueType,g=I()(r,ye);B(l)&&(l=se(l,e,n));var i=B(c)?c.join("."):c,s=B(c)?c:[c],f=e.sortMode==="local-all"||e.sortMode==="service-all",R=!!g.sorter||!!g.sortType||f,C=!1;l||(g.sorter?C=g.sorter:(f||g.sortType)&&(C=e.sortMode==="service-all"?!0:function(o,p,S){return xe(o,p,{arrDataIndex:s,sortOrder:S,sortType:g.sortType,sortDataExtractor:g.sortDataExtractor,sortStringValueTransform:e.sortStringValueTransform})}));var h=function(p,S,x){var D=Ve(S,s),w="",Z=void 0;if(m)if(Q(m)){var E=m(S),U=E.type,F=I()(E,Ae);w=U,Z=F}else w=m;var H=n[w];return H?H({value:D,record:S,options:Z||{},index:x}):Y(D)?"-":D};return d()(d()({align:"center",key:i,width:W(a)?a.length*16+(R?50:30):void 0,render:h},g),{},{title:a,dataIndex:c,children:l,sorter:C})})}var Be=ue.Cw;function it(t){var e=t.table,n=t.globalStateRef,r=(0,y.useRef)([]),a=n.current.isTabChanging;(0,y.useMemo)(function(){a||(r.current=e.columns||[])},[e.columns,a]);var c=(0,y.useMemo)(function(){var m=d()(d()({},T),e.registerValueType);return Be(m,function(g,i){return i.toLowerCase()})},[e.registerValueType]),l=(0,y.useMemo)(function(){return se(r.current,e,c)},[r.current]);return{rawColumns:r.current,baseColumns:l}}var dt=u(13104),ct=u(93525),ze=u.n(ct),ne=u(33819),ie=u(85264),vt=u(88102),Re=u(6472),mt=u(47581),ft=function(e){var n=e.items,r=n===void 0?[]:n,a=e.onChange,c=e.itemClassName,l=e.overlayClassName,m=e.renderItem,g=(0,ie.Dy)((0,ie.VT)(ie.MA)),i=(0,y.useState)(null),s=$()(i,2),f=s[0],R=s[1],C=(0,N.Z)(function(h){var o=h.active,p=h.over;if(o.id!==p.id){var S=r.findIndex(function(D){return D.id===o.id}),x=r.findIndex(function(D){return D.id===p.id});a==null||a((0,Re.Rp)(r,S,x))}R(null)});return(0,v.jsxs)(ie.LB,{sensors:g,collisionDetection:ie.pE,onDragStart:function(o){var p=o.active;return R(p.id)},onDragEnd:C,modifiers:[vt.DL],children:[(0,v.jsx)(Re.Fo,{items:r,strategy:Re.qw,children:r.map(function(h,o){return(0,v.jsx)(ht,{className:c,id:h.id,itemData:h,itemIndex:o,renderItem:m},h.id)})}),(0,v.jsx)(ie.y9,{zIndex:9999,children:f?(0,v.jsx)("div",{className:l,children:m==null?void 0:m(r.find(function(h){return h.id===f}),r.findIndex(function(h){return h.id===f}))}):null})]})};function ht(t){var e=t.className,n=t.id,r=t.itemData,a=t.itemIndex,c=t.renderItem,l=(0,Re.nB)({id:n}),m={transform:mt.ux.Transform.toString(l.transform),transition:l.transition,opacity:l.isDragging?0:void 0};return(0,v.jsx)("div",{className:e,ref:l.setNodeRef,style:m,children:c==null?void 0:c(r,a,l)})}var gt=ft,pt=u(79386),St=u(54221),Ct=[{title:"\u5217\u540D\u79F0",dataIndex:"name",width:200},{title:"\u9690\u85CF\u5217",dataIndex:"hidden",width:90,render:function(e,n){return(0,v.jsx)(ge.Z,{checked:e,onChange:n})}},{title:"\u5BBD\u5EA6",dataIndex:"width",width:100,render:function(e,n){return(0,v.jsx)(St.Z,{min:1,value:e,onChange:function(r){function a(c){return r.apply(this,arguments)}return a.toString=function(){return r.toString()},a}(function(r){r&&n(r)})})}},{title:"\u56FA\u5B9A\u65B9\u5F0F",dataIndex:"fixed",width:60,algin:"center",render:function(e){var n=e?e==="left"?"\u5DE6":"\u53F3":"\u65E0",r=e?e==="left"?"orange":"blue":void 0;return(0,v.jsx)(pe.Z,{color:r,style:{margin:0},children:n})}},{title:"\u6392\u5E8F",dataIndex:"sort",width:50,algin:"center",render:function(){return(0,v.jsx)(ne.ZP,{type:"text",size:"small",icon:(0,v.jsx)(pt.Z,{}),style:{cursor:"move"}})}}],ke=Ct,xt=u(92935),X=u.n(xt),q=u(29070),Ue,Je,We,Ge,Ke,Qe,Xe,yt=(0,q.H)(Ue||(Ue=X()([`
  display: flex;
  padding: 12px 0;
  border-bottom: 1px solid #f0f0f0;
  background: #fafafa;
  border-radius: 8px 8px 0 0;
  font-weight: bold;
`]))),Rt=(0,q.H)(Je||(Je=X()([`
  max-height: calc(100vh - 260px);
  overflow: auto;

  &::-webkit-scrollbar {
    width: 6px;
  }

  &::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 6px;
  }

  &::-webkit-scrollbar-thumb:hover {
    background: #999;
  }
`]))),bt=(0,q.H)(We||(We=X()([`
  border-top: 1px solid #f0f0f0;

  &:first-of-type {
    border-top: none;
  }
`]))),jt=(0,q.H)(Ge||(Ge=X()([`
  background-color: #fff;
  transform: scale(1.05);
  border: 1px solid #f0f0f0;
  border-radius: 8px;
  transition: 200ms ease-out;
`]))),Dt=(0,q.H)(Ke||(Ke=X()([`
  display: flex;
  padding: 8px 0;
  background-color: #fff;

  &:hover {
    background-color: #fafafa;
  }
`]))),qe=(0,q.H)(Qe||(Qe=X()([`
  flex-grow: 1;
  display: flex;
  align-items: center;
  padding: 0 12px;
  word-break: break-all;
`]))),Nt=(0,q.H)(Xe||(Xe=X()([`
  text-align: right;
  padding-top: 12px;
  border-top: 1px solid #f0f0f0;
`])));function He(t){return t.map(function(e){return{id:String(e.dataIndex),name:e.title,hidden:e.hidden,width:e.width,fixed:e.fixed}})}var Et=function(e){var n=e.defaultColumns,r=e.sortColumns,a=e.onOk,c=(0,y.useState)(function(){return He(r)}),l=$()(c,2),m=l[0],g=l[1],i=(0,N.Z)(function(h,o,p){m[h][o]=p,g(ze()(m))}),s=(0,N.Z)(function(h){g(h)}),f=(0,N.Z)(function(){g(He(r))}),R=(0,N.Z)(function(){g(He(n))}),C=(0,N.Z)(function(){var h=[];m.forEach(function(o){var p=o.id,S=o.width,x=o.hidden,D=n.find(function(w){return String(w.dataIndex)===p});D&&h.push(d()(d()({},D),{},{width:S,hidden:x}))}),a==null||a(h)});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:yt,children:ke.map(function(h,o){return(0,v.jsx)("div",{className:qe,style:{width:h.width,justifyContent:h.algin},children:h.title},o)})}),(0,v.jsx)("div",{className:Rt,children:(0,v.jsx)(gt,{items:m,onChange:s,itemClassName:bt,overlayClassName:jt,renderItem:function(o,p,S){return(0,v.jsx)("div",{className:Dt,children:ke.map(function(x,D){var w=o[x.dataIndex],Z=x.dataIndex==="sort"?S==null?void 0:S.listeners:{};return(0,v.jsx)("div",d()(d()({className:qe,style:{width:x.width,justifyContent:x.algin}},Z),{},{children:x.render?x.render(w,function(E){return i(p,x.dataIndex,E)}):w}),"".concat(p).concat(D))})},p)}})}),(0,v.jsx)("div",{className:Nt,children:(0,v.jsxs)(Ce.Z,{children:[(0,v.jsx)(ne.ZP,{onClick:R,children:"\u6062\u590D\u9ED8\u8BA4\u8BBE\u7F6E"}),(0,v.jsx)(ne.ZP,{onClick:f,children:"\u91CD\u7F6E\u672C\u6B21\u8BBE\u7F6E"}),(0,v.jsx)(ne.ZP,{type:"primary",onClick:C,children:"\u786E\u5B9A"})]})})]})},It=Et,wt=["sortColumns","defaultColumns","onOk"],Pt=function(e){var n=e.sortColumns,r=e.defaultColumns,a=e.onOk,c=I()(e,wt);return(0,v.jsx)(dt.Z,d()(d()({title:"\u5217\u8BBE\u7F6E",width:660,centered:!0,destroyOnClose:!0,footer:null},c),{},{children:(0,v.jsx)(It,{sortColumns:n,defaultColumns:r,onOk:a})}))},Tt=Pt;function Zt(t){return t.map(function(e){return d()({},e)})}function Ot(t){var e=t.baseColumns,n=(0,y.useRef)([]),r=(0,y.useState)(!1),a=$()(r,2),c=a[0],l=a[1];(0,y.useMemo)(function(){n.current=Zt(e)},[e]);var m=(0,N.Z)(function(){l(!0)}),g=(0,N.Z)(function(){l(!1)}),i=(0,N.Z)(function(f){n.current=f,g()}),s=(0,v.jsx)(Tt,{open:c,sortColumns:n.current,defaultColumns:e,onCancel:g,onOk:i});return{sortColumns:n.current,sortModalHolder:s,openSortModal:m,closeSortModal:g}}var Mt=u(31912),At=u(86162),Vt=u(2772),Bt=u(25359),_=u.n(Bt),Ht=u(49811),be=u.n(Ht),_e=u(72151),Ft=["children","onClick","noLoading"],$t=_e.Z;function Lt(t){var e=t.children,n=t.onClick,r=t.noLoading,a=r===void 0?!1:r,c=I()(t,Ft),l=(0,y.useState)(!1),m=$()(l,2),g=m[0],i=m[1],s=(0,N.Z)(function(){var f=be()(_()().mark(function R(C){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!a){o.next=3;break}return n==null||n(C),o.abrupt("return");case 3:return i(!0),o.prev=4,o.next=7,n==null?void 0:n(C);case 7:o.next=12;break;case 9:o.prev=9,o.t0=o.catch(4),$t.warn(o.t0);case 12:i(!1);case 13:case"end":return o.stop()}},R,null,[[4,9]])}));return function(R){return f.apply(this,arguments)}}());return(0,v.jsx)(ne.ZP,d()(d()({loading:g},c),{},{onClick:s,children:e}))}var Yt=["text","confirmAgain","confirmProps","onClick"],et,zt=j.kJ,kt=j.HD,Ut=(0,q.H)(et||(et=X()([`
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 4px 12px 0 #ececec;
  min-width: 70px;
  padding: 6px;

  > * {
    display: block;
    width: 100%;
    height: auto !important;
    padding: 3px 6px !important;

    &:hover {
      background: #f6f6f6 !important;
    }
  }
`])));function Fe(t,e){var n=t.text,r=t.confirmAgain,a=t.confirmProps,c=t.onClick,l=I()(t,Yt),m=kt(n)?(0,v.jsx)(Lt,d()(d()({type:"link",size:"small"},l),{},{onClick:function(i){return!r&&(c==null?void 0:c(i))},children:n}),e):n;return r?(0,v.jsx)(At.Z,d()(d()({title:"\u6E29\u99A8\u63D0\u793A",description:"\u8BF7\u4E8C\u6B21\u786E\u8BA4\u60A8\u7684\u64CD\u4F5C\uFF01"},a),{},{onConfirm:c,children:m}),e):m}function Jt(t){var e=t.record,n=t.index,r=t.actionItems,a=t.actionItemsCount,c=t.actionItemsDropdownProps,l=r==null?void 0:r(e,n);if(!zt(l))return null;var m=l.filter(function(f){return f.isShow!==!1}),g;if(m.length>a){var i=[],s=[];return m.forEach(function(f,R){R<a-1?i.push(f):s.push(Fe(f,R))}),(0,v.jsxs)(v.Fragment,{children:[i.map(function(f,R){return Fe(f,R)}),(0,v.jsx)(Vt.Z,d()(d()({placement:"bottomRight"},c),{},{dropdownRender:function(){return(0,v.jsx)("div",{className:Ut,children:s.map(function(R,C){return(0,v.jsx)(y.Fragment,{children:R},C)})})},children:(0,v.jsxs)(ne.ZP,{type:"link",size:"small",style:{gap:2,display:"inline-flex",alignItems:"center"},children:["\u66F4\u591A ",(0,v.jsx)(Mt.Z,{style:{margin:0}})]})}))]})}else g=m.map(function(f,R){return Fe(f,R)});return g}function Wt(t){var e=t.table,n=t.sortColumns,r=e.showRowNumber,a=r===void 0?!1:r,c=e.rowNumberColumnData,l=c===void 0?{}:c,m=e.actionItems,g=e.actionItemsCount,i=g===void 0?2:g,s=e.actionItemsColumnData,f=s===void 0?{}:s,R=e.actionItemsDropdownProps,C=(0,N.Z)(function(p,S,x){return Jt({record:S,index:x,actionItems:m,actionItemsCount:i,actionItemsDropdownProps:R})}),h=(0,y.useMemo)(function(){return n.filter(function(p){return!p.hidden})},[n]),o=(0,y.useMemo)(function(){var p=ze()(h);return a&&p.unshift(d()({title:"\u5E8F\u53F7",align:"center",width:70,fixed:"left",render:function(x,D,w){return w+1},key:le.rowNumber},l)),m&&p.push(d()({title:"\u64CD\u4F5C",align:"center",fixed:"right",width:134,render:C,key:le.actions},f)),p},[h]);return{finalColumns:o}}var tt=u(2950);function Gt(t){var e=t.ref,n=t.rootElemRef,r=t.searchRef,a=t.requestParamsRef,c=t.requestExtraParamsRef,l=t.searchValueRef,m=t.dataSource,g=t.updateDataSource,i=t.updateSummaryData,s=t.updateScrollY,f=t.openSortModal,R=t.runRequest,C=(0,tt.Z)(),h=C.forceUpdate;(0,y.useImperativeHandle)(e,function(){return{refresh:R,getRootElement:function(){return n.current},getSearchRef:function(){return r.current},getRequestParams:function(){return a.current},getRequestExtraParams:function(){return c.current},getSearchValue:function(){return l.current},setSearchValue:function(p,S){var x,D=S!=null&&S.overwrite?p:d()(d()({},l.current),p);(x=r.current)===null||x===void 0||x.setValue(D)},clearSearchValue:function(){var p;return(p=r.current)===null||p===void 0?void 0:p.resetValue()},getDataSource:function(){return m},setDataSource:function(p){g(p),h()},setSummaryData:function(p){i(p),h()},updateScrollY:s,openSortModal:f,rerender:h}})}var Kt=_e.Z,Qt=ue.ei,Xt=me.Z;function qt(t){var e,n=t.request,r=t.updateScrollY,a=t.table,c=t.searchValueRef,l=(0,y.useRef)({current:1,pageSize:(a.pagination!==!1?(e=a.pagination)===null||e===void 0?void 0:e.defaultPageSize:10)||10,total:0}),m=(0,y.useRef)({}),g=(0,y.useRef)({}),i=(0,y.useRef)([]),s=(0,y.useRef)({}),f=(0,y.useState)(!1),R=$()(f,2),C=R[0],h=R[1];a.pagination===!1&&(l.current={});var o=(0,N.Z)(function(){var Z=be()(_()().mark(function E(U,F){var H,L,ee;return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(H={data:[],total:0},!C){O.next=3;break}return O.abrupt("return",H);case 3:if(h(!0),O.prev=4,!n){O.next=18;break}return L={},F!=null&&F.overwrite?L=U||{}:L=d()(d()(d()({},c.current),Qt(l.current,"current","pageSize")),U),O.next=10,n(L,g.current);case 10:ee=O.sent,m.current=L,L.current&&(l.current.current=L.current),L.pageSize&&(l.current.pageSize=L.pageSize),l.current.total=ee.total||0,i.current=ee.data||[],s.current=ee.summaryData||{},H=d()(d()({},ee),{},{data:i.current,total:l.current.total});case 18:O.next=23;break;case 20:O.prev=20,O.t0=O.catch(4),Kt.warn(O.t0);case 23:return h(!1),a.autoScrollY&&r(),O.abrupt("return",H);case 26:case"end":return O.stop()}},E,null,[[4,20]])}));return function(E,U){return Z.apply(this,arguments)}}()),p=!1;if(a.pagination!==!1){var S;p=d()(d()(d()({style:{marginBottom:0},showQuickJumper:!0,showSizeChanger:!0},a.pagination),l.current),{},{onChange:function(E,U){var F,H;(F=a.pagination)===null||F===void 0||(H=F.onChange)===null||H===void 0||H.call(F,E,U),Object.assign(l.current,{current:E,pageSize:U}),o()},className:Xt((S=a.pagination)===null||S===void 0?void 0:S.className,G.pagination)})}var x=(0,N.Z)(function(Z){i.current=Z}),D=(0,N.Z)(function(Z){s.current=Z}),w=(0,N.Z)(function(Z){g.current=Z});return{loading:C,dataSource:i.current,updateDataSource:x,summaryData:s.current,updateSummaryData:D,requestParamsRef:m,requestExtraParamsRef:g,updateRequestExtraParams:w,finalPagination:p,runRequest:o}}var _t=j.HD;function rt(t){if(!t)return 0;var e=window.getComputedStyle(t,null),n=parseFloat(e.marginTop)+parseFloat(e.marginBottom);return t.offsetHeight+n}function er(t,e){if(!t||!e)return 0;var n=window.getComputedStyle(t,null),r=n[e];return _t(r)&&r.match(/^\d+/)?parseFloat(r):0}var tr=j.o8;function rr(t){var e=t.table,n=t.rootElemRef,r=(0,y.useState)(e.virtual?0:void 0),a=$()(r,2),c=a[0],l=a[1],m=(0,y.useRef)(),g=(0,N.Z)(function(){var s;if(!(!n.current||!tr((s=e.scroll)===null||s===void 0?void 0:s.y))){var f=n.current.querySelector(".".concat(G.table)),R=f==null?void 0:f.querySelector("thead"),C=f==null?void 0:f.querySelector("tfoot"),h=f==null?void 0:f.querySelector(".".concat(G.pagination)),o=[R,C,h],p=0;oe(n.current.children,function(S){S!==f&&(p+=rt(S))}),p+=er(f,"marginTop"),oe(o,function(S){p+=rt(S)}),l(n.current.clientHeight-p)}}),i=(0,N.Z)(function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f&&!e.autoScrollY||(clearTimeout(m.current),m.current=setTimeout(g,s))});return(0,y.useEffect)(function(){if(e.autoScrollY){var s=function(){return i()};return window.addEventListener("resize",s),function(){return window.removeEventListener("resize",s)}}},[]),{scrollY:c,updateScrollY:i}}var nr=u(98445),ar=u(41670),or=nr.nr;function lr(t){var e=t.loading,n=t.search,r=t.searchValueRef,a=t.runRequest,c=t.updateScrollY,l=n===!1?{}:n,m=(0,y.useRef)(null),g=(0,tt.Z)(),i=g.forceUpdate,s=or(l,"value");if(s){var f;r.current=(f=l.value)!==null&&f!==void 0?f:{}}var R=(0,N.Z)(function(S,x){var D;r.current=d()({},S),s||i(),(D=l.onChange)===null||D===void 0||D.call(l,S,x)}),C=(0,N.Z)(function(){var S=be()(_()().mark(function x(D){var w;return _()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return r.current=d()({},D),E.next=3,(w=l.onReset)===null||w===void 0?void 0:w.call(l,D);case 3:return E.next=5,a({current:1});case 5:case"end":return E.stop()}},x)}));return function(x){return S.apply(this,arguments)}}()),h=(0,N.Z)(function(){var S=be()(_()().mark(function x(D){var w;return _()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(w=l.onSubmit)===null||w===void 0?void 0:w.call(l,D);case 2:return E.next=4,a();case 4:case"end":return E.stop()}},x)}));return function(x){return S.apply(this,arguments)}}()),o=(0,N.Z)(function(S){var x;(x=l.onToggleCollapsed)===null||x===void 0||x.call(l,S),c(0,!0)}),p=n?(0,v.jsx)(ar.default,d()(d()({},n),{},{rootStyle:d()({marginBottom:16},n.rootStyle),ref:m,disabled:n.disabled||e,value:r.current,onChange:R,onReset:C,onSubmit:h,onToggleCollapsed:o})):null;return{searchNodeHolder:p,searchRef:m}}var nt=j.kJ,ur=j.kK;function sr(t,e){return t===le.rowNumber?e:t===le.actions?"":"-"}function ir(t){var e=[];function n(r){oe(r,function(a){nt(a.children)?n(a.children):e.push(a)})}return n(t),e}function dr(t){var e=t.flattenedColumns,n=t.summaryData,r=t.summaryText,a=r===void 0?"\u5408\u8BA1":r,c=t.hasRowNumber,l=c===void 0?!1:c,m=t.hasRowSelection,g=m===void 0?!1:m,i=[],s=-1;return g&&(s++,i.push({index:s,text:l?"":a})),oe(e,function(f){var R=f.key,C=f.dataIndex,h=nt(C)?C.join("."):C,o=R||h,p=n[o];s++,i.push({index:s,text:ur(p)?sr(o,a):p})}),i}function cr(t){var e=dr(t);return(0,v.jsx)(ae.Z.Summary,{fixed:"bottom",children:(0,v.jsx)(ae.Z.Summary.Row,{children:e.map(function(n){return(0,v.jsx)(ae.Z.Summary.Cell,{align:"center",index:n.index,colSpan:n.colSpan,children:n.text},n.index)})})})}function vr(t){var e=t.table,n=t.finalColumns,r=t.summaryData,a=(0,y.useMemo)(function(){return ir(n)},[n]),c=(0,N.Z)(function(){return cr({flattenedColumns:a,summaryData:r,summaryText:e.summaryText,hasRowSelection:!!e.rowSelection,hasRowNumber:e.showRowNumber})}),l=e.summary?e.summary:Y(r)?void 0:function(){return c()};return{finalSummary:l}}var mr=u(71524),fr=u(96335),hr=u(14467);function gr(t){var e,n=t.title,r=n===void 0?{}:n,a=t.loading,c=t.globalStateRef,l=t.runRequest,m=t.openSortModal,g=(0,N.Z)(function(R){var C,h;a||(c.current.isTabChanging=!0,(C=r.tabs)===null||C===void 0||(h=C.onChange)===null||h===void 0||h.call(C,R),setTimeout(function(){return l({current:1}).finally(function(){return c.current.isTabChanging=!1})},0))}),i={},s=r.showSetting?(0,v.jsx)(fr.Z,{title:"\u5217\u8BBE\u7F6E",children:(0,v.jsx)(ne.ZP,{icon:(0,v.jsx)(mr.Z,{}),disabled:a,style:{marginLeft:10},onClick:m})}):null;(e=r.tabs)!==null&&e!==void 0&&e.tabBarExtraContent&&((0,y.isValidElement)(r.tabs.tabBarExtraContent)?i.right=r.tabs.tabBarExtraContent:Object.assign(i,r.tabs.tabBarExtraContent)),r.showSetting&&(i.right=(0,v.jsxs)(v.Fragment,{children:[i.right,s]}));var f=r.tabs?(0,v.jsx)(hr.Z,d()(d()({},r.tabs),{},{tabBarExtraContent:i,onChange:g})):r.showSetting?(0,v.jsx)("div",{className:r.className,style:d()({textAlign:"right",marginBottom:16},r.style),children:s}):null;return{titleNodeHolder:f}}var pr=me.Z,Sr=j.PO,Cr=function(e,n){var r=e.className,a=e.style,c=e.request,l=e.requestOnMounted,m=l===void 0?!0:l,g=e.header,i=e.search,s=e.titleTop,f=e.title,R=f===void 0?{}:f,C=e.titleBottom,h=e.table,o=h===void 0?{}:h,p=e.footer,S=(0,y.useRef)(null),x=(0,y.useRef)(i===!1?{}:i.defaultValue||{}),D=(0,y.useRef)({isTabChanging:!1}),w=it({table:o,globalStateRef:D}),Z=w.baseColumns,E=Ot({baseColumns:Z}),U=E.sortColumns,F=E.sortModalHolder,H=E.openSortModal,L=Wt({table:o,sortColumns:U}),ee=L.finalColumns,$e=rr({table:o,rootElemRef:S}),O=$e.scrollY,Le=$e.updateScrollY,J=qt({searchValueRef:x,table:o,request:c,updateScrollY:Le}),je=J.loading,at=J.dataSource,Rr=J.updateDataSource,br=J.summaryData,jr=J.updateSummaryData,Dr=J.finalPagination,ve=J.runRequest,Nr=J.requestParamsRef,Er=J.requestExtraParamsRef,Ir=J.updateRequestExtraParams,ot=lr({loading:je,search:i,searchValueRef:x,runRequest:ve,updateScrollY:Le}),wr=ot.searchNodeHolder,Pr=ot.searchRef,Tr=gr({title:R,loading:je,globalStateRef:D,runRequest:ve,openSortModal:H}),Zr=Tr.titleNodeHolder,Or=vr({table:o,finalColumns:ee,summaryData:br}),Mr=Or.finalSummary;(0,y.useEffect)(function(){m&&ve()},[]);var De={loading:je},Ar=(0,N.Z)(function(Vr,lt,ut,Br){var Ye;(o.sortMode==="service"||o.sortMode==="service-all")&&(Ir({filter:lt,sorter:ut}),ve()),(Ye=o.onChange)===null||Ye===void 0||Ye.call(o,Vr,lt,ut,Br)});return Gt({ref:n,rootElemRef:S,searchRef:Pr,requestParamsRef:Nr,requestExtraParamsRef:Er,searchValueRef:x,dataSource:at,updateDataSource:Rr,updateSummaryData:jr,updateScrollY:Le,openSortModal:H,runRequest:ve}),(0,v.jsxs)("div",{ref:S,className:r,style:a,children:[g==null?void 0:g(De),wr,s==null?void 0:s(De),Zr,C==null?void 0:C(De),(0,v.jsx)(ae.Z,d()(d()({tableLayout:"fixed"},o),{},{className:pr(o.className,G.table),columns:ee,dataSource:at,loading:d()({spinning:je},Sr(o==null?void 0:o.loading)?o.loading:void 0),scroll:d()({scrollToFirstRowOnChange:!0,x:"max-content",y:O},o==null?void 0:o.scroll),summary:Mr,pagination:Dr,onChange:Ar})),p==null?void 0:p(De),F]})},xr=(0,y.forwardRef)(Cr),yr=xr}}]);
