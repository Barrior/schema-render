"use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[68],{41670:function(vt,ce,i){i.r(ce),i.d(ce,{default:function(){return Ae}});var Te=i(57213),u=i.n(Te),he=i(74138),w=i(65533),P=i(43190),G=i(33819),S=i(50959),le={submit:"submit",reset:"reset",collapse:"collapse"},Ne={prefixCls:"schema-render",layoutColumnGap:10,layoutRowGap:15,actions:[le.reset,le.submit,le.collapse],defaultCollapsed:!0,collapsedRows:2},Ie=i(54306),ge=i.n(Ie),K=i(31912),Ue=i(15752),re=i(88182);function pe(b,O,E){var T,I;if(E)return E(b);if(!b)return 5;var L=b.clientWidth,Z=((T=b.firstElementChild)===null||T===void 0||(I=T.getBoundingClientRect())===null||I===void 0?void 0:I.width)||320;return Math.floor(L/Z)*O-1}var Se=i(54689),ue=i.n(Se);function se(b,O){var E={},T=Object.keys(b.properties).slice(0,O),I=ue()(T),L;try{for(I.s();!(L=I.n()).done;){var Z=L.value;E[Z]=b.properties[Z]}}catch(k){I.e(k)}finally{I.f()}return{renderType:"Root",properties:E}}function ne(b){var O=b.isCollapsed,E=b.rawSchema,T=b.collapsedNumber;return O?se(E,T):E}var ve=i(32766);function z(b){return ve.PO(b)?Object.keys(b).length:ve.kJ(b)||ve.HD(b)?b.length:0}var xe=i(55225);function Ce(b,O){var E=(0,xe.Z)(O),T=(0,S.useRef)(-1);(0,S.useEffect)(function(){var I,L=(I=b.current)===null||I===void 0?void 0:I.getRootElement();if(L){var Z=new ResizeObserver(function(k){var Q=k[0].contentRect.width;T.current!==Q&&(T.current=Q,E.current(L))});return Z.observe(L),function(){return Z.disconnect()}}},[])}var H=i(11527);function Ze(b,O){var E=b.schema,T=(0,S.useState)(b.defaultCollapsed),I=ge()(T,2),L=I[0],Z=I[1],k=(0,S.useState)(function(){var B;return pe((B=O.current)===null||B===void 0?void 0:B.getRootElement(),b.collapsedRows,b.calcCollapsedNumber)}),Q=ge()(k,2),ae=Q[0],Le=Q[1],be=(0,S.useRef)(E);(0,S.useMemo)(function(){be.current=ne({isCollapsed:L,collapsedNumber:ae,rawSchema:E})},[ae,L,E]),Ce(O,function(B){Le(pe(B,b.collapsedRows,b.calcCollapsedNumber))});var me=(0,re.Z)(function(B){var U;Z(B),(U=b.onToggleCollapsed)===null||U===void 0||U.call(b,B)}),Ve=(0,re.Z)(function(B){var U,X=B.locale;if(z(E.properties)<=ae)return null;if(L){var ie;return(0,H.jsxs)(G.ZP,{type:"link",onClick:function(){return me(!1)},style:{padding:0},children:[X==null||(ie=X.Search)===null||ie===void 0?void 0:ie.expand,(0,H.jsx)(K.Z,{})]})}return(0,H.jsxs)(G.ZP,{type:"link",onClick:function(){return me(!0)},style:{padding:0},children:[X==null||(U=X.Search)===null||U===void 0?void 0:U.collapse,(0,H.jsx)(Ue.Z,{})]})}),Be=u()({collapse:Ve},b.registerActions);return{schema:be.current,registerActions:Be}}var F=i(87793),ye=u()(u()({},F.Z),{},{FormRender:u()(u()({},F.Z.FormRender),{},{submit:"\u67E5\u8BE2"}),Search:{collapse:"\u6536\u8D77",expand:"\u5C55\u5F00"}}),Re=i(98445);function d(b){return{className:Re.Rk(b,"form-actions"),style:{gridColumnStart:-2,textAlign:"end"}}}var we={submit:function(O){var E=O.loading;return(0,H.jsx)(G.ZP,{loading:E.submit,htmlType:"submit",type:"primary",icon:(0,H.jsx)(he.Z,{}),children:"\u641C\u7D22"})},reset:function(O){var E=O.loading,T=O.handleReset;return(0,H.jsx)(G.ZP,{loading:E.reset,onClick:T,icon:(0,H.jsx)(w.Z,{}),children:"\u91CD\u7F6E"})}},Oe=function(O,E){var T=u()(u()({},Ne),O),I=(0,S.useRef)(null),L=(0,S.useMemo)(function(){return u()(u()({},ye),T.locale)},[T.locale]),Z=Ze(T,I),k=Z.schema,Q=Z.registerActions,ae=(0,S.useMemo)(function(){return d(T.prefixCls)},[T.prefixCls]);return(0,S.useImperativeHandle)(E,function(){return I.current}),(0,H.jsx)(P.default,u()(u()({layout:"autoFill"},T),{},{ref:I,locale:L,schema:k,registerActions:u()(u()({},we),Q),actionsRestSchema:ae,actionsRenderMode:"formItem"}))},Me=(0,S.forwardRef)(Oe),Ae=Me},80068:function(vt,ce,i){i.r(ce),i.d(ce,{default:function(){return Zr}});var Te=i(57213),u=i.n(Te),he=i(68362),w=i(32766),P=i(88182),G=i(55659),S=i(50959),le=w.kJ,Ne=w.PO,Ie=w.HD,ge=w.kK,K=function(e){return le(e)?!e.length:Ne(e)?!Object.keys(e).length:Ie(e)?e.trim()==="":ge(e)};function Ue(t,e){return le(t)?t.map(e):[]}function re(t,e){if(t)for(var n=t.length,r=0;r<n;r++){var o=e==null?void 0:e(t[r],r,t);if(o)return}}function pe(){return Math.random().toString(36).substring(7).replace(/\d/g,"x")}var Se=pe(),ue=function(t){return t.actions="__actions__",t.rowNumber="__row-number__",t}({}),se={table:"st-table-".concat(Se),pagination:"st-pagination-".concat(Se)},ne=i(46373),ve=i(12342),z=i.n(ve),xe=i(66640),Ce=i(19912),H=i(4883),Ze=i(54306),F=i.n(Ze),ye=i(3383),Re=i(11352),d=i(11527),we=function(e){var n=e.imgList,r=e.imgProps,o=e.groupProps,c=(0,S.useState)(!1),l=F()(c,2),m=l[0],f=l[1],v=(0,S.useState)(0),s=F()(v,2),h=s[0],C=s[1],y=function(a){C(a),f(!0)};return(0,d.jsx)(ye.Z.PreviewGroup,u()(u()({},o),{},{items:n,preview:{visible:m,current:h,onChange:function(a){return C(a)},onVisibleChange:function(a){return f(a)}},children:(0,d.jsx)(Re.Z,{children:n.map(function(g,a){return(0,S.createElement)(ye.Z,u()(u()({width:60},r),{},{src:g,key:a,onClick:function(){return y(a)}}))})})}))},Oe=we,Me={backgroundColor:"#ececec",padding:16,borderRadius:6,textAlign:"left"},Ae=new RegExp("(?<!\\d*\\.\\d*)(?=(\\B\\d{3})+(\\.\\d+)?$)","g"),b=function(e){var n=e.value;return K(n)?"-":isNaN(Number(n))?n:String(n).replace(Ae,",")},O=b,E=i(96335),T=["maxLength"],I=function(e){var n=e.value,r=e.options,o=r===void 0?{}:r,c=n?String(n):"-",l=o.maxLength,m=l===void 0?10:l,f=z()(o,T);return c.length>m?(0,d.jsxs)(E.Z,u()(u()({title:c},f),{},{children:[c.slice(0,m-1),"..."]})):(0,d.jsx)(d.Fragment,{children:c})},L=I,Z=i(33819),k=i(13104),Q=["maxLength"],ae=function(e){var n=e.value,r=e.options,o=r===void 0?{}:r,c=n?String(n):"-",l=o.maxLength,m=l===void 0?10:l,f=z()(o,Q),v=(0,S.useState)(!1),s=F()(v,2),h=s[0],C=s[1];return c.length>m?(0,d.jsxs)(d.Fragment,{children:[c.slice(0,m-3),"...",(0,d.jsx)(Z.ZP,{type:"link",style:{padding:0},onClick:function(){return C(!0)},children:"\u5168\u90E8"}),(0,d.jsx)(k.Z,u()(u()({width:600,title:"\u5168\u90E8",footer:null},f),{},{open:h,onCancel:function(){return C(!1)},children:c}))]}):(0,d.jsx)(d.Fragment,{children:c})},Le=ae,be=["groupProps"],me=w.kJ,Ve={code:function(e){var n=e.value,r=e.options;return(0,d.jsx)("pre",{style:u()(u()({},Me),r.style),children:(0,d.jsx)("code",{children:n})})},percent:function(e){var n=e.value;return K(n)?"-":"".concat(n,"%")},switch:function(e){var n=e.value,r=e.options;return(0,d.jsx)(xe.Z,u()(u()({},r),{},{checked:!!n}))},tags:function(e){var n=e.value,r=e.options,o=me(n)?n:[n];return o.map(function(c,l){return(0,S.createElement)(Ce.Z,u()(u()({},r),{},{key:l}),c)})},rate:function(e){var n=e.value,r=e.options;return(0,d.jsx)(H.Z,u()(u()({style:{width:134}},r),{},{disabled:!0,value:n}))},"comma-number":function(e){return(0,d.jsx)(O,u()({},e))},images:function(e){var n=e.value,r=e.options;if(K(n))return"-";var o=me(n)?n:[n],c=r.groupProps,l=z()(r,be);return(0,d.jsx)(Oe,{imgList:o,imgProps:l,groupProps:c})},"long-text":function(e){return(0,d.jsx)(L,u()({},e))},"long-text-modal":function(e){return(0,d.jsx)(Le,u()({},e))}},Be=i(67006),B=i.n(Be),U=ne.U2,X=w.kJ,ie=w.PO;function oe(t,e){return t===e?0:t>e?1:-1}var mt=function(e,n,r){var o=r.sortType,c=r.sortOrder,l=r.arrDataIndex,m=r.sortDataExtractor,f=r.sortStringValueTransform,v=m?m(e):U(e,l),s=m?m(n):U(n,l);return ie(v)||ie(s)?0:(X(v)&&(v=v.join("")),X(s)&&(s=s.join("")),v=String(v).trim(),s=String(s).trim(),K(v)?c==="ascend"?1:-1:K(s)?c==="ascend"?-1:1:o==="string"?(f&&(v=f(v),s=f(s)),oe("@".concat(v).toLowerCase(),"@".concat(s).toLowerCase())):o==="date"?oe(new Date(v),new Date(s)):!isNaN(Number(v))&&!isNaN(Number(s))?oe(Number(v),Number(s)):B()(v).isValid()&&B()(s).isValid()?oe(new Date(v),new Date(s)):(f&&(v=f(v),s=f(s)),oe(v,s)))},ft=["title","dataIndex","children","valueType"],ht=["type"],gt=ne.U2,Fe=w.kJ,pt=w.HD,St=w.mf;function Je(t,e,n){return t.map(function(r){var o=r.title,c=r.dataIndex,l=r.children,m=r.valueType,f=z()(r,ft);Fe(l)&&(l=Je(l,e,n));var v=Fe(c)?c.join("."):c,s=Fe(c)?c:[c],h=e.sortMode==="local-all"||e.sortMode==="service-all",C=!!f.sorter||!!f.sortType||h,y=!1;l||(f.sorter?y=f.sorter:(h||f.sortType)&&(y=e.sortMode==="service-all"?!0:function(a,p,x){return mt(a,p,{arrDataIndex:s,sortOrder:x,sortType:f.sortType,sortDataExtractor:f.sortDataExtractor,sortStringValueTransform:e.sortStringValueTransform})}));var g=function(p,x,R){var j=gt(x,s),N="",M=void 0;if(m)if(St(m)){var D=m(x,R),J=D.type,$=z()(D,ht);N=J,M=$}else N=m;var V=n[N];return V?V({value:j,record:x,options:M||{},index:R}):K(j)?"-":j};return u()(u()({align:"center",key:v,width:pt(o)?o.length*16+(C?50:30):void 0,render:g},f),{},{title:o,dataIndex:c,children:l,sorter:y})})}var xt=ne.Cw;function Ct(t){var e=t.table,n=t.globalStateRef,r=(0,S.useRef)([]),o=n.current.isTabChanging;(0,S.useMemo)(function(){o||(r.current=e.columns||[])},[e.columns,o]);var c=(0,S.useMemo)(function(){var m=u()(u()({},Ve),e.registerValueType);return xt(m,function(f,v){return v.toLowerCase()})},[e.registerValueType]),l=(0,S.useMemo)(function(){return Je(r.current,e,c)},[r.current]);return{rawColumns:r.current,baseColumns:l}}var yt=i(93525),We=i.n(yt),de=i(85264),Rt=i(88102),je=i(6472),bt=i(47581),jt=function(e){var n=e.items,r=n===void 0?[]:n,o=e.onChange,c=e.itemClassName,l=e.overlayClassName,m=e.renderItem,f=(0,de.Dy)((0,de.VT)(de.MA)),v=(0,S.useState)(null),s=F()(v,2),h=s[0],C=s[1],y=(0,P.Z)(function(g){var a=g.active,p=g.over;if(a.id!==p.id){var x=r.findIndex(function(j){return j.id===a.id}),R=r.findIndex(function(j){return j.id===p.id});o==null||o((0,je.Rp)(r,x,R))}C(null)});return(0,d.jsxs)(de.LB,{sensors:f,collisionDetection:de.pE,onDragStart:function(a){var p=a.active;return C(p.id)},onDragEnd:y,modifiers:[Rt.DL],children:[(0,d.jsx)(je.Fo,{items:r,strategy:je.qw,children:r.map(function(g,a){return(0,d.jsx)(Dt,{className:c,id:g.id,itemData:g,itemIndex:a,renderItem:m},g.id)})}),(0,d.jsx)(de.y9,{zIndex:9999,children:h?(0,d.jsx)("div",{className:l,children:m==null?void 0:m(r.find(function(g){return g.id===h}),r.findIndex(function(g){return g.id===h}))}):null})]})};function Dt(t){var e=t.className,n=t.id,r=t.itemData,o=t.itemIndex,c=t.renderItem,l=(0,je.nB)({id:n}),m={transform:bt.ux.Transform.toString(l.transform),transition:l.transition,opacity:l.isDragging?0:void 0};return(0,d.jsx)("div",{className:e,ref:l.setNodeRef,style:m,children:c==null?void 0:c(r,o,l)})}var Pt=jt,Et=i(79386),Tt=i(54221),Nt=[{title:"\u5217\u540D\u79F0",dataIndex:"name",width:200},{title:"\u9690\u85CF\u5217",dataIndex:"hidden",width:90,render:function(e,n){return(0,d.jsx)(xe.Z,{checked:e,onChange:n})}},{title:"\u5BBD\u5EA6",dataIndex:"width",width:100,render:function(e,n){return(0,d.jsx)(Tt.Z,{min:1,value:e,onChange:function(r){function o(c){return r.apply(this,arguments)}return o.toString=function(){return r.toString()},o}(function(r){r&&n(r)})})}},{title:"\u56FA\u5B9A\u65B9\u5F0F",dataIndex:"fixed",width:60,algin:"center",render:function(e){var n=e?e==="left"?"\u5DE6":"\u53F3":"\u65E0",r=e?e==="left"?"orange":"blue":void 0;return(0,d.jsx)(Ce.Z,{color:r,style:{margin:0},children:n})}},{title:"\u6392\u5E8F",dataIndex:"sort",width:50,algin:"center",render:function(){return(0,d.jsx)(Z.ZP,{type:"text",size:"small",icon:(0,d.jsx)(Et.Z,{}),style:{cursor:"move"}})}}],Ge=Nt,It=i(92935),q=i.n(It),_=i(29070),Ke,Qe,Xe,qe,_e,et,tt,Zt=(0,_.H)(Ke||(Ke=q()([`
  display: flex;
  padding: 12px 0;
  border-bottom: 1px solid #f0f0f0;
  background: #fafafa;
  border-radius: 8px 8px 0 0;
  font-weight: bold;
`]))),wt=(0,_.H)(Qe||(Qe=q()([`
  max-height: calc(100vh - 260px);
  overflow: auto;

  &::-webkit-scrollbar {
    width: 6px;
  }

  &::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 6px;
  }

  &::-webkit-scrollbar-thumb:hover {
    background: #999;
  }
`]))),Ot=(0,_.H)(Xe||(Xe=q()([`
  border-top: 1px solid #f0f0f0;

  &:first-of-type {
    border-top: none;
  }
`]))),Mt=(0,_.H)(qe||(qe=q()([`
  background-color: #fff;
  transform: scale(1.05);
  border: 1px solid #f0f0f0;
  border-radius: 8px;
  transition: 200ms ease-out;
`]))),At=(0,_.H)(_e||(_e=q()([`
  display: flex;
  padding: 8px 0;
  background-color: #fff;

  &:hover {
    background-color: #fafafa;
  }
`]))),rt=(0,_.H)(et||(et=q()([`
  flex-grow: 1;
  display: flex;
  align-items: center;
  padding: 0 12px;
  word-break: break-all;
`]))),Lt=(0,_.H)(tt||(tt=q()([`
  text-align: right;
  padding-top: 12px;
  border-top: 1px solid #f0f0f0;
`])));function $e(t){return t.map(function(e){return{id:String(e.dataIndex),name:e.title,hidden:e.hidden,width:e.width,fixed:e.fixed}})}var Vt=function(e){var n=e.defaultColumns,r=e.sortColumns,o=e.onOk,c=(0,S.useState)(function(){return $e(r)}),l=F()(c,2),m=l[0],f=l[1],v=(0,P.Z)(function(g,a,p){m[g][a]=p,f(We()(m))}),s=(0,P.Z)(function(g){f(g)}),h=(0,P.Z)(function(){f($e(r))}),C=(0,P.Z)(function(){f($e(n))}),y=(0,P.Z)(function(){var g=[];m.forEach(function(a){var p=a.id,x=a.width,R=a.hidden,j=n.find(function(N){return String(N.dataIndex)===p});j&&g.push(u()(u()({},j),{},{width:x,hidden:R}))}),o==null||o(g)});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:Zt,children:Ge.map(function(g,a){return(0,d.jsx)("div",{className:rt,style:{width:g.width,justifyContent:g.algin},children:g.title},a)})}),(0,d.jsx)("div",{className:wt,children:(0,d.jsx)(Pt,{items:m,onChange:s,itemClassName:Ot,overlayClassName:Mt,renderItem:function(a,p,x){return(0,d.jsx)("div",{className:At,children:Ge.map(function(R,j){var N=a[R.dataIndex],M=R.dataIndex==="sort"?x==null?void 0:x.listeners:{};return(0,d.jsx)("div",u()(u()({className:rt,style:{width:R.width,justifyContent:R.algin}},M),{},{children:R.render?R.render(N,function(D){return v(p,R.dataIndex,D)}):N}),"".concat(p).concat(j))})},p)}})}),(0,d.jsx)("div",{className:Lt,children:(0,d.jsxs)(Re.Z,{children:[(0,d.jsx)(Z.ZP,{onClick:C,children:"\u6062\u590D\u9ED8\u8BA4\u8BBE\u7F6E"}),(0,d.jsx)(Z.ZP,{onClick:h,children:"\u91CD\u7F6E\u672C\u6B21\u8BBE\u7F6E"}),(0,d.jsx)(Z.ZP,{type:"primary",onClick:y,children:"\u786E\u5B9A"})]})})]})},Bt=Vt,Ft=["sortColumns","defaultColumns","onOk"],$t=function(e){var n=e.sortColumns,r=e.defaultColumns,o=e.onOk,c=z()(e,Ft);return(0,d.jsx)(k.Z,u()(u()({title:"\u5217\u8BBE\u7F6E",width:660,centered:!0,destroyOnClose:!0,footer:null},c),{},{children:(0,d.jsx)(Bt,{sortColumns:n,defaultColumns:r,onOk:o})}))},Ht=$t;function Yt(t){return t.map(function(e){return u()({},e)})}function zt(t){var e=t.baseColumns,n=(0,S.useRef)([]),r=(0,S.useState)(!1),o=F()(r,2),c=o[0],l=o[1];(0,S.useMemo)(function(){n.current=Yt(e)},[e]);var m=(0,P.Z)(function(){l(!0)}),f=(0,P.Z)(function(){l(!1)}),v=(0,P.Z)(function(h){n.current=h,f()}),s=(0,d.jsx)(Ht,{open:c,sortColumns:n.current,defaultColumns:e,onCancel:f,onOk:v});return{sortColumns:n.current,sortModalHolder:s,openSortModal:m,closeSortModal:f}}var kt=i(31912),Ut=i(86162),Jt=i(2772),Wt=i(25359),ee=i.n(Wt),Gt=i(49811),De=i.n(Gt),nt=i(72151),Kt=["children","onClick","noLoading"],Qt=nt.Z;function Xt(t){var e=t.children,n=t.onClick,r=t.noLoading,o=r===void 0?!1:r,c=z()(t,Kt),l=(0,S.useState)(!1),m=F()(l,2),f=m[0],v=m[1],s=(0,P.Z)(function(){var h=De()(ee()().mark(function C(y){return ee()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!o){a.next=3;break}return n==null||n(y),a.abrupt("return");case 3:return v(!0),a.prev=4,a.next=7,n==null?void 0:n(y);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(4),Qt.warn(a.t0);case 12:v(!1);case 13:case"end":return a.stop()}},C,null,[[4,9]])}));return function(C){return h.apply(this,arguments)}}());return(0,d.jsx)(Z.ZP,u()(u()({loading:f},c),{},{onClick:s,children:e}))}var qt=["text","confirmAgain","confirmProps","onClick"],at,_t=w.kJ,er=w.HD,tr=ne.CE,rr=(0,_.H)(at||(at=q()([`
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 4px 12px 0 #ececec;
  min-width: 70px;
  padding: 6px;

  > * {
    display: block;
    width: 100%;
    height: auto !important;
    padding: 3px 6px !important;

    &:hover {
      background: #f6f6f6 !important;
    }
  }
`])));function He(t,e){var n=t.text,r=t.confirmAgain,o=t.confirmProps,c=t.onClick,l=z()(t,qt),m=er(n)?(0,d.jsx)(Xt,u()(u()({type:"link",size:"small"},tr(l,"isShow")),{},{onClick:function(v){return!r&&(c==null?void 0:c(v))},children:n}),e):n;return r?(0,d.jsx)(Ut.Z,u()(u()({title:"\u6E29\u99A8\u63D0\u793A",description:"\u8BF7\u4E8C\u6B21\u786E\u8BA4\u60A8\u7684\u64CD\u4F5C\uFF01"},o),{},{onConfirm:c,children:m}),e):m}function nr(t){var e=t.record,n=t.index,r=t.actionItems,o=t.actionItemsCount,c=t.actionItemsDropdownProps,l=r==null?void 0:r(e,n);if(!_t(l))return null;var m=l.filter(function(h){return h.isShow!==!1}),f;if(m.length>o){var v=[],s=[];return m.forEach(function(h,C){C<o-1?v.push(h):s.push(He(h,C))}),(0,d.jsxs)(d.Fragment,{children:[v.map(function(h,C){return He(h,C)}),(0,d.jsx)(Jt.Z,u()(u()({placement:"bottomRight"},c),{},{dropdownRender:function(){return(0,d.jsx)("div",{className:rr,children:s.map(function(C,y){return(0,d.jsx)(S.Fragment,{children:C},y)})})},children:(0,d.jsxs)(Z.ZP,{type:"link",size:"small",style:{gap:2,display:"inline-flex",alignItems:"center"},children:["\u66F4\u591A ",(0,d.jsx)(kt.Z,{style:{margin:0}})]})}))]})}else f=m.map(function(h,C){return He(h,C)});return f}function ar(t){var e=t.table,n=t.sortColumns,r=e.showRowNumber,o=r===void 0?!1:r,c=e.rowNumberColumnData,l=c===void 0?{}:c,m=e.actionItems,f=e.actionItemsCount,v=f===void 0?2:f,s=e.actionItemsColumnData,h=s===void 0?{}:s,C=e.actionItemsDropdownProps,y=(0,P.Z)(function(p,x,R){return nr({record:x,index:R,actionItems:m,actionItemsCount:v,actionItemsDropdownProps:C})}),g=(0,S.useMemo)(function(){return n.filter(function(p){return!p.hidden})},[n]),a=(0,S.useMemo)(function(){var p=We()(g);return o&&p.unshift(u()({title:"\u5E8F\u53F7",align:"center",width:70,fixed:"left",render:function(R,j,N){return N+1},key:ue.rowNumber},l)),m&&p.push(u()({title:"\u64CD\u4F5C",align:"center",fixed:"right",width:134,render:y,key:ue.actions},h)),p},[g]);return{finalColumns:a}}var ot=i(2950);function or(t){var e=t.ref,n=t.rootElemRef,r=t.searchRef,o=t.requestParamsRef,c=t.requestExtraParamsRef,l=t.searchValueRef,m=t.dataSource,f=t.updateDataSource,v=t.updateSummaryData,s=t.updateScrollY,h=t.openSortModal,C=t.runRequest,y=(0,ot.Z)(),g=y.forceUpdate;(0,S.useImperativeHandle)(e,function(){return{refresh:C,getRootElement:function(){return n.current},getSearchRef:function(){return r.current},getRequestParams:function(){return o.current},getRequestExtraParams:function(){return c.current},getSearchValue:function(){return l.current},setSearchValue:function(p,x){var R,j=x!=null&&x.overwrite?p:u()(u()({},l.current),p);(R=r.current)===null||R===void 0||R.setValue(j)},clearSearchValue:function(){var p;return(p=r.current)===null||p===void 0?void 0:p.resetValue()},getDataSource:function(){return m},setDataSource:function(p){f(p),g()},setSummaryData:function(p){v(p),g()},updateScrollY:s,openSortModal:h,rerender:g}})}var lr=nt.Z,ur=ne.ei,sr=he.Z;function ir(t){var e,n=t.request,r=t.updateScrollY,o=t.table,c=t.searchValueRef,l=(0,S.useRef)({current:1,pageSize:(o.pagination!==!1?(e=o.pagination)===null||e===void 0?void 0:e.defaultPageSize:10)||10,total:0}),m=(0,S.useRef)({}),f=(0,S.useRef)({}),v=(0,S.useRef)([]),s=(0,S.useRef)({}),h=(0,S.useState)(!1),C=F()(h,2),y=C[0],g=C[1];o.pagination===!1&&(l.current={});var a=(0,P.Z)(function(){var M=De()(ee()().mark(function D(J,$){var V,Y,te;return ee()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(V={data:[],total:0},!y){A.next=3;break}return A.abrupt("return",V);case 3:if(g(!0),A.prev=4,!n){A.next=18;break}return Y={},$!=null&&$.overwrite?Y=J||{}:Y=u()(u()(u()({},c.current),ur(l.current,"current","pageSize")),J),A.next=10,n(Y,f.current);case 10:te=A.sent,m.current=Y,Y.current&&(l.current.current=Y.current),Y.pageSize&&(l.current.pageSize=Y.pageSize),l.current.total=te.total||0,v.current=te.data||[],s.current=te.summaryData||{},V=u()(u()({},te),{},{data:v.current,total:l.current.total});case 18:A.next=23;break;case 20:A.prev=20,A.t0=A.catch(4),lr.warn(A.t0);case 23:return g(!1),o.autoScrollY&&r(),A.abrupt("return",V);case 26:case"end":return A.stop()}},D,null,[[4,20]])}));return function(D,J){return M.apply(this,arguments)}}()),p=!1;if(o.pagination!==!1){var x;p=u()(u()(u()({style:{marginBottom:0},showQuickJumper:!0,showSizeChanger:!0,showTotal:function(D){return"\u5171 ".concat(D," \u6761\u6570\u636E")}},o.pagination),l.current),{},{onChange:function(D,J){var $,V;($=o.pagination)===null||$===void 0||(V=$.onChange)===null||V===void 0||V.call($,D,J),Object.assign(l.current,{current:D,pageSize:J}),a()},className:sr((x=o.pagination)===null||x===void 0?void 0:x.className,se.pagination)})}var R=(0,P.Z)(function(M){v.current=M}),j=(0,P.Z)(function(M){s.current=M}),N=(0,P.Z)(function(M){f.current=M});return{loading:y,dataSource:v.current,updateDataSource:R,summaryData:s.current,updateSummaryData:j,requestParamsRef:m,requestExtraParamsRef:f,updateRequestExtraParams:N,finalPagination:p,runRequest:a}}var dr=w.HD;function lt(t){if(!t)return 0;var e=window.getComputedStyle(t,null),n=parseFloat(e.marginTop)+parseFloat(e.marginBottom);return t.offsetHeight+n}function cr(t,e){if(!t||!e)return 0;var n=window.getComputedStyle(t,null),r=n[e];return dr(r)&&r.match(/^\d+/)?parseFloat(r):0}var vr=w.o8;function mr(t){var e=t.table,n=t.rootElemRef,r=(0,S.useState)(e.virtual?0:void 0),o=F()(r,2),c=o[0],l=o[1],m=(0,S.useRef)(),f=(0,P.Z)(function(){var s;if(!(!n.current||!vr((s=e.scroll)===null||s===void 0?void 0:s.y))){var h=n.current.querySelector(".".concat(se.table)),C=h==null?void 0:h.querySelector("thead"),y=h==null?void 0:h.querySelector("tfoot"),g=h==null?void 0:h.querySelector(".".concat(se.pagination)),a=[C,y,g],p=0;re(n.current.children,function(x){x!==h&&(p+=lt(x))}),p+=cr(h,"marginTop"),re(a,function(x){p+=lt(x)}),l(n.current.clientHeight-p)}}),v=(0,P.Z)(function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;h&&!e.autoScrollY||(clearTimeout(m.current),m.current=setTimeout(f,s))});return(0,S.useEffect)(function(){if(e.autoScrollY){var s=function(){return v()};return window.addEventListener("resize",s),function(){return window.removeEventListener("resize",s)}}},[]),{scrollY:c,updateScrollY:v}}var fr=i(98445),hr=i(41670),gr=fr.nr;function pr(t){var e=t.loading,n=t.search,r=t.searchValueRef,o=t.runRequest,c=t.updateScrollY,l=n===!1?{}:n,m=(0,S.useRef)(null),f=(0,ot.Z)(),v=f.forceUpdate,s=gr(l,"value");if(s){var h;r.current=(h=l.value)!==null&&h!==void 0?h:{}}var C=(0,P.Z)(function(x,R){var j;r.current=u()({},x),s||v(),(j=l.onChange)===null||j===void 0||j.call(l,x,R)}),y=(0,P.Z)(function(){var x=De()(ee()().mark(function R(j){var N;return ee()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return r.current=u()({},j),D.next=3,(N=l.onReset)===null||N===void 0?void 0:N.call(l,j);case 3:return D.next=5,o({current:1});case 5:case"end":return D.stop()}},R)}));return function(R){return x.apply(this,arguments)}}()),g=(0,P.Z)(function(){var x=De()(ee()().mark(function R(j){var N;return ee()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(N=l.onSubmit)===null||N===void 0?void 0:N.call(l,j);case 2:return D.next=4,o();case 4:case"end":return D.stop()}},R)}));return function(R){return x.apply(this,arguments)}}()),a=(0,P.Z)(function(x){var R;(R=l.onToggleCollapsed)===null||R===void 0||R.call(l,x),c(0,!0)}),p=n?(0,d.jsx)(hr.default,u()(u()({},n),{},{rootStyle:u()({marginBottom:16},n.rootStyle),ref:m,disabled:n.disabled||e,value:r.current,onChange:C,onReset:y,onSubmit:g,onToggleCollapsed:a})):null;return{searchNodeHolder:p,searchRef:m}}var ut=w.kJ,Sr=w.kK;function xr(t,e){return t===ue.rowNumber?e:t===ue.actions?"":"-"}function Cr(t){var e=[];function n(r){re(r,function(o){ut(o.children)?n(o.children):e.push(o)})}return n(t),e}function yr(t){var e=t.flattenedColumns,n=t.summaryData,r=t.summaryText,o=r===void 0?"\u5408\u8BA1":r,c=t.hasRowNumber,l=c===void 0?!1:c,m=t.hasRowSelection,f=m===void 0?!1:m,v=[],s=-1;return f&&(s++,v.push({index:s,text:l?"":o})),re(e,function(h){var C=h.key,y=h.dataIndex,g=ut(y)?y.join("."):y,a=C||g,p=n[a];s++,v.push({index:s,text:Sr(p)?xr(a,o):p})}),v}function Rr(t){var e=yr(t);return(0,d.jsx)(G.Z.Summary,{fixed:"bottom",children:(0,d.jsx)(G.Z.Summary.Row,{children:e.map(function(n){return(0,d.jsx)(G.Z.Summary.Cell,{align:"center",index:n.index,colSpan:n.colSpan,children:n.text},n.index)})})})}function br(t){var e=t.table,n=t.finalColumns,r=t.summaryData,o=(0,S.useMemo)(function(){return Cr(n)},[n]),c=(0,P.Z)(function(){return Rr({flattenedColumns:o,summaryData:r,summaryText:e.summaryText,hasRowSelection:!!e.rowSelection,hasRowNumber:e.showRowNumber})}),l=e.summary?e.summary:K(r)?void 0:function(){return c()};return{finalSummary:l}}var jr=i(71524),Dr=i(14467);function Pr(t){var e,n=t.title,r=n===void 0?{}:n,o=t.loading,c=t.globalStateRef,l=t.runRequest,m=t.openSortModal,f=(0,P.Z)(function(C){var y,g;o||(c.current.isTabChanging=!0,(y=r.tabs)===null||y===void 0||(g=y.onChange)===null||g===void 0||g.call(y,C),setTimeout(function(){return l({current:1}).finally(function(){return c.current.isTabChanging=!1})},0))}),v={},s=r.showSetting?(0,d.jsx)(E.Z,{title:"\u5217\u8BBE\u7F6E",children:(0,d.jsx)(Z.ZP,{icon:(0,d.jsx)(jr.Z,{}),disabled:o,style:{marginLeft:10},onClick:m})}):null;(e=r.tabs)!==null&&e!==void 0&&e.tabBarExtraContent&&((0,S.isValidElement)(r.tabs.tabBarExtraContent)?v.right=r.tabs.tabBarExtraContent:Object.assign(v,r.tabs.tabBarExtraContent)),r.showSetting&&(v.right=(0,d.jsxs)(d.Fragment,{children:[v.right,s]}));var h=r.tabs?(0,d.jsx)(Dr.Z,u()(u()({},r.tabs),{},{tabBarExtraContent:v,onChange:f})):r.showSetting?(0,d.jsx)("div",{className:r.className,style:u()({textAlign:"right",marginBottom:16},r.style),children:s}):null;return{titleNodeHolder:h}}var Er=he.Z,Tr=w.PO,Nr=function(e,n){var r=e.className,o=e.style,c=e.request,l=e.requestOnMounted,m=l===void 0?!0:l,f=e.header,v=e.search,s=e.titleTop,h=e.title,C=h===void 0?{}:h,y=e.titleBottom,g=e.table,a=g===void 0?{}:g,p=e.footer,x=(0,S.useRef)(null),R=(0,S.useRef)(v===!1?{}:v.defaultValue||{}),j=(0,S.useRef)({isTabChanging:!1}),N=Ct({table:a,globalStateRef:j}),M=N.baseColumns,D=zt({baseColumns:M}),J=D.sortColumns,$=D.sortModalHolder,V=D.openSortModal,Y=ar({table:a,sortColumns:J}),te=Y.finalColumns,Ye=mr({table:a,rootElemRef:x}),A=Ye.scrollY,ze=Ye.updateScrollY,W=ir({searchValueRef:R,table:a,request:c,updateScrollY:ze}),Pe=W.loading,st=W.dataSource,wr=W.updateDataSource,Or=W.summaryData,Mr=W.updateSummaryData,Ar=W.finalPagination,fe=W.runRequest,Lr=W.requestParamsRef,Vr=W.requestExtraParamsRef,Br=W.updateRequestExtraParams,it=pr({loading:Pe,search:v,searchValueRef:R,runRequest:fe,updateScrollY:ze}),Fr=it.searchNodeHolder,$r=it.searchRef,Hr=Pr({title:C,loading:Pe,globalStateRef:j,runRequest:fe,openSortModal:V}),Yr=Hr.titleNodeHolder,zr=br({table:a,finalColumns:te,summaryData:Or}),kr=zr.finalSummary;(0,S.useEffect)(function(){m&&fe()},[]);var Ee={loading:Pe},Ur=(0,P.Z)(function(Jr,dt,ct,Wr){var ke;(a.sortMode==="service"||a.sortMode==="service-all")&&(Br({filter:dt,sorter:ct}),fe()),(ke=a.onChange)===null||ke===void 0||ke.call(a,Jr,dt,ct,Wr)});return or({ref:n,rootElemRef:x,searchRef:$r,requestParamsRef:Lr,requestExtraParamsRef:Vr,searchValueRef:R,dataSource:st,updateDataSource:wr,updateSummaryData:Mr,updateScrollY:ze,openSortModal:V,runRequest:fe}),(0,d.jsxs)("div",{ref:x,className:r,style:o,children:[f==null?void 0:f(Ee),Fr,s==null?void 0:s(Ee),Yr,y==null?void 0:y(Ee),(0,d.jsx)(G.Z,u()(u()({tableLayout:"fixed"},a),{},{className:Er(a.className,se.table),columns:te,dataSource:st,loading:u()({spinning:Pe},Tr(a==null?void 0:a.loading)?a.loading:void 0),scroll:u()({scrollToFirstRowOnChange:!0,x:"max-content",y:A},a==null?void 0:a.scroll),summary:kr,pagination:Ar,onChange:Ur})),p==null?void 0:p(Ee),$]})},Ir=(0,S.forwardRef)(Nr),Zr=Ir}}]);
