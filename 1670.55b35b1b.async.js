(self.webpackChunkroot=self.webpackChunkroot||[]).push([[1670],{41670:function(_,g,r){"use strict";r.r(g),r.d(g,{ISearchProps:function(){return j.ISearchProps},ISearchRef:function(){return j.ISearchRef},default:function(){return X}});var E=r(57213),c=r.n(E),P=r(5727),i=r(50959),C={submit:"submit",reset:"reset",collapse:"collapse"},z={prefixCls:"schema-render",layoutColumnGap:10,layoutRowGap:15,actions:[C.reset,C.submit,C.collapse],defaultCollapsed:!0,collapsedRows:2},F=r(54306),y=r.n(F),T=r(88695),M=r(15752),x=r(88182),A=r(90597);function N(e,o,a){var t,n;if(a)return a(e);if(!e)return 5;var l=e.clientWidth,s=((t=e.firstElementChild)===null||t===void 0||(n=t.getBoundingClientRect())===null||n===void 0?void 0:n.width)||320;return Math.floor(l/s)*o-1}var H=r(54689),b=r.n(H);function D(e,o){var a={},t=Object.keys(e.properties).slice(0,o),n=b()(t),l;try{for(n.s();!(l=n.n()).done;){var s=l.value;a[s]=e.properties[s]}}catch(d){n.e(d)}finally{n.f()}return{renderType:"Root",properties:a}}function W(e){var o=e.isCollapsed,a=e.rawSchema,t=e.collapsedNumber;return o?D(a,t):a}var R=r(32766);function $(e){return R.PO(e)?Object.keys(e).length:R.kJ(e)||R.HD(e)?e.length:0}var G=r(55225);function L(e,o){var a=(0,G.Z)(o),t=(0,i.useRef)(-1);(0,i.useEffect)(function(){var n,l=(n=e.current)===null||n===void 0?void 0:n.getRootElement();if(l){var s=new ResizeObserver(function(d){var f=d[0].contentRect.width;t.current!==f&&(t.current=f,a.current(l))});return s.observe(l),function(){return s.disconnect()}}},[])}var h=r(11527);function U(e,o){var a=e.schema,t=(0,i.useState)(e.defaultCollapsed),n=y()(t,2),l=n[0],s=n[1],d=(0,i.useState)(function(){var u;return N((u=o.current)===null||u===void 0?void 0:u.getRootElement(),e.collapsedRows,e.calcCollapsedNumber)}),f=y()(d,2),p=f[0],Y=f[1],I=(0,i.useRef)(a);(0,i.useMemo)(function(){I.current=W({isCollapsed:l,collapsedNumber:p,rawSchema:a})},[p,l,a]),L(o,function(u){Y(N(u,e.collapsedRows,e.calcCollapsedNumber))});var Z=(0,x.Z)(function(u){var v;s(u),(v=e.onToggleCollapsed)===null||v===void 0||v.call(e,u)}),w=(0,x.Z)(function(u){var v,m=u.locale;if($(a.properties)<=p)return null;if(l){var S;return(0,h.jsxs)(A.ZP,{type:"link",onClick:function(){return Z(!1)},style:{padding:0},children:[m==null||(S=m.Search)===null||S===void 0?void 0:S.expand,(0,h.jsx)(T.Z,{})]})}return(0,h.jsxs)(A.ZP,{type:"link",onClick:function(){return Z(!0)},style:{padding:0},children:[m==null||(v=m.Search)===null||v===void 0?void 0:v.collapse,(0,h.jsx)(M.Z,{})]})}),k=c()({collapse:w},e.registerActions);return{schema:I.current,registerActions:k}}var O=r(87793),B=c()(c()({},O.Z),{},{FormRender:c()(c()({},O.Z.FormRender),{},{submit:"\u67E5\u8BE2"}),Search:{collapse:"\u6536\u8D77",expand:"\u5C55\u5F00"}}),J=r(98445);function K(e){return{className:J.Rk(e,"form-actions"),style:{gridColumnStart:-2,textAlign:"end"}}}var Q=function(o,a){var t=c()(c()({},z),o),n=(0,i.useRef)(null),l=(0,i.useMemo)(function(){return c()(c()({},B),t.locale)},[t.locale]),s=U(t,n),d=s.schema,f=s.registerActions,p=(0,i.useMemo)(function(){return K(t.prefixCls)},[t.prefixCls]);return(0,i.useImperativeHandle)(a,function(){return n.current}),(0,h.jsx)(P.default,c()(c()({layout:"autoFill"},t),{},{ref:n,locale:l,schema:d,registerActions:f,actionsRestSchema:p,actionsRenderMode:"formItem"}))},V=(0,i.forwardRef)(Q),j=r(73290),X=V},73290:function(){}}]);
