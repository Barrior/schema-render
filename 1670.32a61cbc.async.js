"use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[1670],{41670:function(q,g,r){r.r(g),r.d(g,{default:function(){return V}});var E=r(57213),c=r.n(E),z=r(68683),i=r(50959),C={submit:"submit",reset:"reset",collapse:"collapse"},F={prefixCls:"schema-render",layoutColumnGap:10,layoutRowGap:15,actions:[C.reset,C.submit,C.collapse],defaultCollapsed:!0,collapsedRows:2},T=r(54306),y=r.n(T),I=r(88695),M=r(15752),A=r(88182),N=r(90597);function x(e,o,l){var t,n;if(l)return l(e);if(!e)return 5;var a=e.clientWidth,s=((t=e.firstElementChild)===null||t===void 0||(n=t.getBoundingClientRect())===null||n===void 0?void 0:n.width)||320;return Math.floor(a/s)*o-1}var P=r(54689),b=r.n(P);function H(e,o){var l={},t=Object.keys(e.properties).slice(0,o),n=b()(t),a;try{for(n.s();!(a=n.n()).done;){var s=a.value;l[s]=e.properties[s]}}catch(d){n.e(d)}finally{n.f()}return{renderType:"Root",properties:l}}function D(e){var o=e.isCollapsed,l=e.rawSchema,t=e.collapsedNumber;return o?H(l,t):l}var R=r(32766);function W(e){return R.PO(e)?Object.keys(e).length:R.kJ(e)||R.HD(e)?e.length:0}var $=r(55225);function G(e,o){var l=(0,$.Z)(o),t=(0,i.useRef)(-1);(0,i.useEffect)(function(){var n,a=(n=e.current)===null||n===void 0?void 0:n.getRootElement();if(a){var s=new ResizeObserver(function(d){var v=d[0].contentRect.width;t.current!==v&&(t.current=v,l.current(a))});return s.observe(a),function(){return s.disconnect()}}},[])}var h=r(11527);function L(e,o){var l=e.schema,t=(0,i.useState)(e.defaultCollapsed),n=y()(t,2),a=n[0],s=n[1],d=(0,i.useState)(function(){var u;return x((u=o.current)===null||u===void 0?void 0:u.getRootElement(),e.collapsedRows,e.calcCollapsedNumber)}),v=y()(d,2),p=v[0],X=v[1],j=(0,i.useRef)(l);(0,i.useMemo)(function(){j.current=D({isCollapsed:a,collapsedNumber:p,rawSchema:l})},[p,a,l]),G(o,function(u){X(x(u,e.collapsedRows,e.calcCollapsedNumber))});var Z=(0,A.Z)(function(u){var f;s(u),(f=e.onToggleCollapsed)===null||f===void 0||f.call(e,u)}),Y=(0,A.Z)(function(u){var f,m=u.locale;if(W(l.properties)<=p)return null;if(a){var S;return(0,h.jsxs)(N.ZP,{type:"link",onClick:function(){return Z(!1)},style:{padding:0},children:[m==null||(S=m.Search)===null||S===void 0?void 0:S.expand,(0,h.jsx)(I.Z,{})]})}return(0,h.jsxs)(N.ZP,{type:"link",onClick:function(){return Z(!0)},style:{padding:0},children:[m==null||(f=m.Search)===null||f===void 0?void 0:f.collapse,(0,h.jsx)(M.Z,{})]})}),w=c()({collapse:Y},e.registerActions);return{schema:j.current,registerActions:w}}var O=r(87793),U=c()(c()({},O.Z),{},{FormRender:c()(c()({},O.Z.FormRender),{},{submit:"\u67E5\u8BE2"}),Search:{collapse:"\u6536\u8D77",expand:"\u5C55\u5F00"}}),B=r(98445);function J(e){return{className:B.Rk(e,"form-actions"),style:{gridColumnStart:-2,textAlign:"end"}}}var K=function(o,l){var t=c()(c()({},F),o),n=(0,i.useRef)(null),a=(0,i.useMemo)(function(){return c()(c()({},U),t.locale)},[t.locale]),s=L(t,n),d=s.schema,v=s.registerActions,p=(0,i.useMemo)(function(){return J(t.prefixCls)},[t.prefixCls]);return(0,i.useImperativeHandle)(l,function(){return n.current}),(0,h.jsx)(z.default,c()(c()({layout:"autoFill"},t),{},{ref:n,locale:a,schema:d,registerActions:v,actionsRestSchema:p,actionsRenderMode:"formItem"}))},Q=(0,i.forwardRef)(K),V=Q}}]);
